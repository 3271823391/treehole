<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>注册</title>
  <style>
    body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:#e9edf3;font-family:"PingFang SC","Microsoft YaHei",sans-serif;color:#1f2d3d}
    .wrap{width:100%;max-width:720px;padding:24px}
    .card{background:#f4f6f9;border-radius:28px;padding:48px 56px;box-shadow:0 15px 38px rgba(40,60,120,.14)}
    h1{text-align:center;margin:0;font-size:50px} p{text-align:center;color:#56657a;font-size:24px;margin:16px 0 30px}
    label{display:block;font-size:30px;margin:18px 0 10px;font-weight:600;color:#455878}
    input{width:100%;height:70px;border:1px solid #cfd7e3;border-radius:12px;padding:0 16px;font-size:26px;box-sizing:border-box}
    button{width:100%;height:72px;border:none;border-radius:12px;margin-top:24px;background:linear-gradient(90deg,#2f4463,#445c82);color:#fff;font-size:30px;font-weight:700;cursor:pointer}
    .hint{text-align:center;margin-top:24px;font-size:22px}.hint a{color:#334f80;text-decoration:none;font-weight:700}
    .error{min-height:34px;text-align:center;color:#d84b4b;font-size:22px;margin-top:16px}
  </style>
</head>
<body>
<div class="wrap"><div class="card">
  <h1>创建凭证</h1><p>仅用于进入私密空间</p>
  <label for="username">登录账号</label><input id="username" autocomplete="username" />
  <label for="password">密码</label><input id="password" type="password" autocomplete="new-password" />
  <label for="confirm">确认密码</label><input id="confirm" type="password" autocomplete="new-password" />
  <button id="registerBtn">立即注册</button>
  <div class="error" id="error"></div>
  <div class="hint">已有账户? <a href="/login">返回登录</a></div>
</div></div>
<script>
async function register(){
  const username=document.getElementById('username').value.trim();
  const password=document.getElementById('password').value;
  const confirm_password=document.getElementById('confirm').value;
  const err=document.getElementById('error'); err.textContent='';
  const res=await fetch('/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password,confirm_password})});
  const data=await res.json().catch(()=>({}));
  if(!res.ok||!data.ok){err.textContent='注册失败，请检查输入';return;}
  window.location.href='/login';
}
document.getElementById('registerBtn').onclick=register;
</script>
</body>
</html>
